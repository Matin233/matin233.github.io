(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{406:function(t,a,e){"use strict";e.r(a);var n=e(44),s=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"page-注册与管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#page-注册与管理"}},[t._v("#")]),t._v(" Page 注册与管理")]),t._v(" "),e("p",[t._v("对于小程序中的每个页面，都需要在页面对应的 "),e("code",[t._v("js")]),t._v(" 文件中进行注册，指定页面的初始数据、生命周期回调、事件处理函数等。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//index.js")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  data"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面第一次渲染使用的初始数据")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 渲染层可以通过 WXML 对数据进行绑定")]),t._v("\n    text"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is page data."')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onLoad")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面加载时触发")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一个页面只会调用一次，可以在 onLoad 的参数中获取打开当前页面路径中的参数")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onShow")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面显示/切入前台时触发")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onReady")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面初次渲染完成时触发")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onHide")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面隐藏/切入后台时触发")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如 wx.navigateTo 或底部 tab 切换到其他页面，小程序切入后台等")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onUnload")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面卸载时触发")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如 wx.redirectTo 或 wx.navigateBack 到其他页面时")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onPullDownRefresh")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听用户下拉刷新事件")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onReachBottom")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听用户上拉触底事件")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onShareAppMessage")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 监听用户点击页面内转发按钮（button 组件 open-type="share"）')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或右上角菜单“转发”按钮的行为，并自定义转发内容")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onPageScroll")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听用户滑动页面事件")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onResize")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小程序屏幕旋转时触发")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onTabItemTap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pagePath"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Event handler.")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("viewTap")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      text"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set some data for updating view.'")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this is setData callback")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  customData"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    hi"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MINA'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h2",{attrs:{id:"data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[t._v("#")]),t._v(" data")]),t._v(" "),e("p",[e("code",[t._v("data")]),t._v(" 是页面第一次渲染使用的"),e("strong",[t._v("初始数据")]),t._v("。")]),t._v(" "),e("p",[t._v("页面加载时，"),e("code",[t._v("data")]),t._v(" 将会以"),e("code",[t._v("JSON")]),t._v("字符串的形式由逻辑层传至渲染层，因此"),e("code",[t._v("data")]),t._v("中的数据必须是可以转成"),e("code",[t._v("JSON")]),t._v("的类型：字符串，数字，布尔值，对象，数组。")]),t._v(" "),e("p",[t._v("渲染层可以通过 "),e("RouterLink",{attrs:{to:"/mp/get-started/data-binding.html"}},[t._v("WXML")]),t._v(" 对数据进行绑定。")],1),t._v(" "),e("p",[e("strong",[t._v("示例代码：")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developers.weixin.qq.com/s/2PeBsKmn6EZ9",target:"_blank",rel:"noopener noreferrer"}},[t._v("在开发者工具中预览效果"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{text}}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{array[0].msg}}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nPage({\n  data: {\n    text: 'init data',\n    array: [{msg: '1'}, {msg: '2'}]\n  }\n})\n")])])]),e("h2",{attrs:{id:"生命周期回调函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期回调函数"}},[t._v("#")]),t._v(" 生命周期回调函数")]),t._v(" "),e("h3",{attrs:{id:"onload-object-query"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onload-object-query"}},[t._v("#")]),t._v(" onLoad(Object query)")]),t._v(" "),e("p",[t._v("页面加载时触发。一个页面只会调用一次，可以在 onLoad 的参数中获取打开当前页面路径中的参数。")]),t._v(" "),e("p",[e("strong",[t._v("参数：")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("query")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("打开当前页面路径中的参数")])])])]),t._v(" "),e("h3",{attrs:{id:"onshow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onshow"}},[t._v("#")]),t._v(" onShow()")]),t._v(" "),e("p",[t._v("页面显示/切入前台时触发。")]),t._v(" "),e("h4",{attrs:{id:"onready"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onready"}},[t._v("#")]),t._v(" onReady()")]),t._v(" "),e("p",[t._v("页面初次渲染完成时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互。")]),t._v(" "),e("p",[t._v("注意：对界面内容进行设置的 API 如"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/ui/navigation-bar/wx.setNavigationBarTitle.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx.setNavigationBarTitle"),e("OutboundLink")],1),t._v("，请在"),e("code",[t._v("onReady")]),t._v("之后进行。详见"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page-life-cycle.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"onhide"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onhide"}},[t._v("#")]),t._v(" onHide()")]),t._v(" "),e("p",[t._v("页面隐藏/切入后台时触发。 如 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx.navigateTo"),e("OutboundLink")],1),t._v(" 或底部 "),e("code",[t._v("tab")]),t._v(" 切换到其他页面，小程序切入后台等。")]),t._v(" "),e("h3",{attrs:{id:"onunload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onunload"}},[t._v("#")]),t._v(" onUnload()")]),t._v(" "),e("p",[t._v("页面卸载时触发。如"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.redirectTo.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx.redirectTo"),e("OutboundLink")],1),t._v("或"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx.navigateBack"),e("OutboundLink")],1),t._v("到其他页面时。")]),t._v(" "),e("h2",{attrs:{id:"页面事件处理函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#页面事件处理函数"}},[t._v("#")]),t._v(" 页面事件处理函数")]),t._v(" "),e("h3",{attrs:{id:"onpulldownrefresh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onpulldownrefresh"}},[t._v("#")]),t._v(" onPullDownRefresh()")]),t._v(" "),e("p",[t._v("监听用户下拉刷新事件。")]),t._v(" "),e("ul",[e("li",[t._v("需要在"),e("code",[t._v("app.json")]),t._v("的"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("window")]),e("OutboundLink")],1),t._v("选项中或"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("页面配置"),e("OutboundLink")],1),t._v("中开启"),e("code",[t._v("enablePullDownRefresh")]),t._v("。")]),t._v(" "),e("li",[t._v("可以通过"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/ui/pull-down-refresh/wx.startPullDownRefresh.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx.startPullDownRefresh"),e("OutboundLink")],1),t._v("触发下拉刷新，调用后触发下拉刷新动画，效果与用户手动下拉刷新一致。")]),t._v(" "),e("li",[t._v("当处理完数据刷新后，"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/ui/pull-down-refresh/wx.stopPullDownRefresh.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx.stopPullDownRefresh"),e("OutboundLink")],1),t._v("可以停止当前页面的下拉刷新。")])]),t._v(" "),e("h3",{attrs:{id:"onreachbottom"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onreachbottom"}},[t._v("#")]),t._v(" onReachBottom()")]),t._v(" "),e("p",[t._v("监听用户上拉触底事件。")]),t._v(" "),e("ul",[e("li",[t._v("可以在"),e("code",[t._v("app.json")]),t._v("的"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("window")]),e("OutboundLink")],1),t._v("选项中或"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("页面配置"),e("OutboundLink")],1),t._v("中设置触发距离"),e("code",[t._v("onReachBottomDistance")]),t._v("。")]),t._v(" "),e("li",[t._v("在触发距离内滑动期间，本事件只会被触发一次。")])]),t._v(" "),e("h3",{attrs:{id:"onpagescroll-object-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onpagescroll-object-object"}},[t._v("#")]),t._v(" onPageScroll(Object object)")]),t._v(" "),e("p",[t._v("监听用户滑动页面事件。")]),t._v(" "),e("p",[e("strong",[t._v("参数 Object object")]),t._v(":")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("scrollTop")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("页面在垂直方向已滚动的距离（单位px）")])])])]),t._v(" "),e("p",[e("strong",[t._v("注意：请只在需要的时候才在 page 中定义此方法，不要定义空方法。以减少不必要的事件派发对渲染层-逻辑层通信的影响。")]),t._v(" "),e("strong",[t._v("注意：请避免在 onPageScroll 中过于频繁的执行 "),e("code",[t._v("setData")]),t._v(" 等引起"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/performance/tips.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("逻辑层-渲染层通信"),e("OutboundLink")],1),t._v("的操作。尤其是每次传输大量数据，会影响通信耗时。")])]),t._v(" "),e("h3",{attrs:{id:"onaddtofavorites-object-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onaddtofavorites-object-object"}},[t._v("#")]),t._v(" onAddToFavorites(Object object)")]),t._v(" "),e("blockquote",[e("p",[t._v("本接口为 Beta 版本，安卓 7.0.15 版本起支持，暂只在安卓平台支持")])]),t._v(" "),e("p",[t._v("监听用户点击右上角菜单“收藏”按钮的行为，并自定义收藏内容。")]),t._v(" "),e("p",[e("strong",[t._v("参数 Object object")]),t._v(":")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("webViewUrl")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("页面中包含"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("web-view"),e("OutboundLink")],1),t._v("组件时，返回当前"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("web-view"),e("OutboundLink")],1),t._v("的url")])])])]),t._v(" "),e("p",[t._v("此事件处理函数需要 return 一个 Object，用于自定义收藏内容：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("title")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义标题")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("页面标题或账号名称")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("imageUrl")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义图片，显示图片长宽比为 1：1")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("页面截图")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("query")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义query字段")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当前页面的query")])])])]),t._v(" "),e("p",[e("strong",[t._v("示例代码")])]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onAddToFavorites")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webview 页面返回 webViewUrl")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webViewUrl: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webViewUrl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      title"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'自定义标题'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      imageUrl"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://demo.png'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      query"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name=xxx&age=xxx'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"onshareappmessage-object-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onshareappmessage-object-object"}},[t._v("#")]),t._v(" onShareAppMessage(Object object)")]),t._v(" "),e("p",[t._v("监听用户点击页面内转发按钮（"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/button.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("button"),e("OutboundLink")],1),t._v(" 组件 "),e("code",[t._v('open-type="share"')]),t._v("）或右上角菜单“转发”按钮的行为，并自定义转发内容。")]),t._v(" "),e("p",[e("strong",[t._v("注意：只有定义了此事件处理函数，右上角菜单才会显示“转发”按钮")])]),t._v(" "),e("p",[e("strong",[t._v("参数 Object object")]),t._v(":")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("最低版本")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("from")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("转发事件来源。 "),e("code",[t._v("button")]),t._v("：页面内转发按钮； "),e("code",[t._v("menu")]),t._v("：右上角转发菜单")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.2.4"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("target")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("如果 "),e("code",[t._v("from")]),t._v(" 值是 "),e("code",[t._v("button")]),t._v("，则 "),e("code",[t._v("target")]),t._v(" 是触发这次转发事件的 "),e("code",[t._v("button")]),t._v("，否则为 "),e("code",[t._v("undefined")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.2.4"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("webViewUrl")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("页面中包含"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("web-view"),e("OutboundLink")],1),t._v("组件时，返回当前"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("web-view"),e("OutboundLink")],1),t._v("的url")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.6.4"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[t._v("此事件处理函数需要 return 一个 Object，用于自定义转发内容，返回内容如下：")]),t._v(" "),e("p",[e("strong",[t._v("自定义转发内容")]),t._v(" 基础库 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("2.8.1"),e("OutboundLink")],1),t._v(" 起，分享图支持云图片。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("最低版本")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("title")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("转发标题")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当前小程序名称")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("path")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("转发路径")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当前页面 path ，必须是以 / 开头的完整路径")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("imageUrl")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义图片路径，可以是本地文件路径、代码包文件路径或者网络图片路径。支持PNG及JPG。显示图片长宽比是 5:4。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用默认截图")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.5.0"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("promise")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("如果该参数存在，则以 resolve 结果为准，如果三秒内不 resolve，分享会使用上面传入的默认参数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("2.12.0"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[e("strong",[t._v("示例代码")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developers.weixin.qq.com/s/mffqUKmr6fZU",target:"_blank",rel:"noopener noreferrer"}},[t._v("在开发者工具中预览效果"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onShareAppMessage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" promise "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          title"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'自定义转发标题'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      title"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'自定义转发标题'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/page/user?id=123'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      promise \n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"onsharetimeline"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onsharetimeline"}},[t._v("#")]),t._v(" onShareTimeline()")]),t._v(" "),e("blockquote",[e("p",[t._v("基础库 2.11.3 开始支持，低版本需做"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容处理"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("blockquote",[e("p",[t._v("本接口为 Beta 版本，暂只在 Android 平台支持，详见"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/share-timeline.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("分享到朋友圈 (Beta)"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("监听右上角菜单“分享到朋友圈”按钮的行为，并自定义分享内容。")]),t._v(" "),e("p",[e("strong",[t._v("注意：只有定义了此事件处理函数，右上角菜单才会显示“分享到朋友圈”按钮")])]),t._v(" "),e("p",[e("strong",[t._v("自定义转发内容")])]),t._v(" "),e("p",[t._v("事件处理函数返回一个 Object，用于自定义分享内容，不支持自定义页面路径，返回内容如下：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("最低版本")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("title")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义标题，即朋友圈列表页上显示的标题")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当前小程序名称")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("query")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义页面路径中携带的参数，如 path?a=1&b=2 的 “?” 后面部分")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当前页面路径携带的参数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("imageUrl")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义图片路径，可以是本地文件或者网络图片。支持 PNG 及 JPG，显示图片长宽比是 1:1。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认使用小程序 Logo")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})])])]),t._v(" "),e("h3",{attrs:{id:"onresize-object-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onresize-object-object"}},[t._v("#")]),t._v(" onResize(Object object)")]),t._v(" "),e("blockquote",[e("p",[t._v("基础库 2.4.0 开始支持，低版本需做"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容处理"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("小程序屏幕旋转时触发。详见 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html#%E5%9C%A8%E6%89%8B%E6%9C%BA%E4%B8%8A%E5%90%AF%E7%94%A8%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%E6%94%AF%E6%8C%81",target:"_blank",rel:"noopener noreferrer"}},[t._v("响应显示区域变化"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"ontabitemtap-object-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ontabitemtap-object-object"}},[t._v("#")]),t._v(" onTabItemTap(Object object)")]),t._v(" "),e("blockquote",[e("p",[t._v("基础库 1.9.0 开始支持，低版本需做"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容处理"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("点击 tab 时触发")]),t._v(" "),e("p",[e("strong",[t._v("Object 参数说明：")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("最低版本")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("index")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("被点击tabItem的序号，从0开始")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.9.0"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("pagePath")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("被点击tabItem的页面路径")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.9.0"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("text")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("被点击tabItem的按钮文字")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.9.0"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[e("strong",[t._v("示例代码：")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onTabItemTap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pagePath"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"onsaveexitstate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onsaveexitstate"}},[t._v("#")]),t._v(" onSaveExitState()")]),t._v(" "),e("blockquote",[e("p",[t._v("基础库 2.7.4 开始支持，低版本需做"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容处理"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("每当小程序可能被销毁之前，页面回调函数 "),e("code",[t._v("onSaveExitState")]),t._v(" 会被调用，可以进行"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/operating-mechanism.html#_4-%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81",target:"_blank",rel:"noopener noreferrer"}},[t._v("退出状态"),e("OutboundLink")],1),t._v("的保存。")]),t._v(" "),e("h2",{attrs:{id:"组件事件处理函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组件事件处理函数"}},[t._v("#")]),t._v(" 组件事件处理函数")]),t._v(" "),e("p",[e("code",[t._v("Page")]),t._v(" 中还可以定义组件事件处理函数。在渲染层的组件中加入"),e("RouterLink",{attrs:{to:"/get-started/event-binding.html"}},[t._v("事件处理")]),t._v("，当事件被触发时，就会执行 Page 中定义的事件处理函数。")],1),t._v(" "),e("p",[e("strong",[t._v("示例代码：")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developers.weixin.qq.com/s/vUf6fKmX64Zn",target:"_blank",rel:"noopener noreferrer"}},[t._v("在开发者工具中预览效果"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewTap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" click me "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nPage({\n  viewTap: function() {\n    console.log('view tap')\n  }\n})\n")])])]),e("h3",{attrs:{id:"page-route"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#page-route"}},[t._v("#")]),t._v(" Page.route")]),t._v(" "),e("blockquote",[e("p",[t._v("基础库 1.2.0 开始支持，低版本需做"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容处理"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("到当前页面的路径，类型为"),e("code",[t._v("String")]),t._v("。")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onShow")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"page-prototype-setdata-object-data-function-callback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#page-prototype-setdata-object-data-function-callback"}},[t._v("#")]),t._v(" Page.prototype.setData(Object data, Function callback)")]),t._v(" "),e("p",[e("code",[t._v("setData")]),t._v(" 函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 "),e("code",[t._v("this.data")]),t._v(" 的值（同步）。")]),t._v(" "),e("h4",{attrs:{id:"参数说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[t._v("#")]),t._v(" 参数说明")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("描述")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("最低版本")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("data")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("这次要改变的数据")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("callback")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setData引起的界面更新渲染完毕后的回调函数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1.5.0"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[e("code",[t._v("Object")]),t._v(" 以 "),e("code",[t._v("key: value")]),t._v(" 的形式表示，将 "),e("code",[t._v("this.data")]),t._v(" 中的 "),e("code",[t._v("key")]),t._v(" 对应的值改变成 "),e("code",[t._v("value")]),t._v("。")]),t._v(" "),e("p",[e("strong",[t._v("其中 "),e("code",[t._v("key")]),t._v(" 可以以数据路径的形式给出，支持改变数组中的某一项或对象的某个属性，如 "),e("code",[t._v("array[2].message")]),t._v("，"),e("code",[t._v("a.b.c.d")]),t._v("，并且不需要在 this.data 中预先定义。")])]),t._v(" "),e("p",[e("strong",[t._v("注意：")])]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成数据不一致")]),t._v("。")]),t._v(" "),e("li",[t._v("仅支持设置可 JSON 化的数据。")]),t._v(" "),e("li",[t._v("单次设置的数据不能超过1024kB，请尽量避免一次设置过多的数据。")]),t._v(" "),e("li",[t._v("请不要把 data 中任何一项的 value 设为 "),e("code",[t._v("undefined")]),t._v(" ，否则这一项将不被设置并可能遗留一些潜在问题。")])]),t._v(" "),e("p",[e("strong",[t._v("示例代码：")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developers.weixin.qq.com/s/HofnzKmb6fZe",target:"_blank",rel:"noopener noreferrer"}},[t._v("在开发者工具中预览效果"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--index.wxml--\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{text}}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("changeText"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Change normal data "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{num}}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("changeNum"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Change normal num "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{array[0].text}}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("changeItemInArray"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Change Array data "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{object.text}}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("changeItemInObject"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Change Object data "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{newField.text}}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("addNewField"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Add new data "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n// index.js\nPage({\n  data: {\n    text: 'init data',\n    num: 0,\n    array: [{text: 'init data'}],\n    object: {\n      text: 'init data'\n    }\n  },\n  changeText: function() {\n    // this.data.text = 'changed data' // 不要直接修改 this.data\n    // 应该使用 setData\n    this.setData({\n      text: 'changed data'\n    })\n  },\n  changeNum: function() {\n    // 或者，可以修改 this.data 之后马上用 setData 设置一下修改了的字段\n    this.data.num = 1\n    this.setData({\n      num: this.data.num\n    })\n  },\n  changeItemInArray: function() {\n    // 对于对象或数组字段，可以直接修改一个其下的子字段，这样做通常比修改整个对象或数组更好\n    this.setData({\n      'array[0].text':'changed data'\n    })\n  },\n  changeItemInObject: function(){\n    this.setData({\n      'object.text': 'changed data'\n    });\n  },\n  addNewField: function() {\n    this.setData({\n      'newField.text': 'new data'\n    })\n  }\n})\n")])])]),e("h2",{attrs:{id:"页面间通信"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#页面间通信"}},[t._v("#")]),t._v(" 页面间通信")]),t._v(" "),e("blockquote",[e("p",[t._v("基础库 2.7.3 开始支持，低版本需做"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容处理"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("如果一个页面由另一个页面通过 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("wx.navigateTo")]),e("OutboundLink")],1),t._v(" 打开，这两个页面间将建立一条数据通道：")]),t._v(" "),e("ul",[e("li",[t._v("被打开的页面可以通过 "),e("code",[t._v("this.getOpenerEventChannel()")]),t._v(" 方法来获得一个 "),e("code",[t._v("EventChannel")]),t._v(" 对象；")]),t._v(" "),e("li",[e("code",[t._v("wx.navigateTo")]),t._v(" 的 "),e("code",[t._v("success")]),t._v(" 回调中也包含一个 "),e("code",[t._v("EventChannel")]),t._v(" 对象。")])]),t._v(" "),e("p",[t._v("这两个 "),e("code",[t._v("EventChannel")]),t._v(" 对象间可以使用 "),e("code",[t._v("emit")]),t._v(" 和 "),e("code",[t._v("on")]),t._v(" 方法相互发送、监听事件。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developers.weixin.qq.com/s/sYz82Kmy7Gfq",target:"_blank",rel:"noopener noreferrer"}},[t._v("在开发者工具中预览效果"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=s.exports}}]);